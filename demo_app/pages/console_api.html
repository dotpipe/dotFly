<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Server Console</title>
    <link rel="stylesheet" href="/demo_app/assets/style.css">
</head>
<body>
<script src="/dotpipe.js"></script>
<script>
const pageData = {"tagname": "table", "id": "apiContent", "children": [{"tagname": "tr", "children": [{"tagname": "td", "children": [{"tagname": "h2", "textContent": "\ud83d\ude80 API Tester"}]}]}, {"tagname": "tr", "children": [{"tagname": "td", "textContent": "\ud83c\udfaf Endpoint:"}, {"tagname": "td", "children": [{"tagname": "select", "id": "endpoint", "class": "apiForm", "options": "Chat Status:http://chat.chessers.club/api/status.php;Send Message:http://chat.chessers.club/api/message.php;Get Messages:http://chat.chessers.club/api/messages.php;User Info:http://chat.chessers.club/api/user.php;Server Info:http://chat.chessers.club/api/info.php"}]}]}, {"tagname": "tr", "children": [{"tagname": "td", "textContent": "\u2699\ufe0f Method:"}, {"tagname": "td", "children": [{"tagname": "select", "id": "method", "class": "apiForm", "options": "GET:GET;POST:POST"}]}]}, {"tagname": "tr", "children": [{"tagname": "td", "textContent": "\ud83d\udcdd Request Data (JSON):"}, {"tagname": "td", "children": [{"tagname": "textarea", "id": "requestData", "class": "apiForm", "placeholder": "{\"id\": \"123\", \"title\": \"New Task\"}", "style": "width:400px;height:100px;"}]}]}, {"tagname": "tr", "children": [{"tagname": "td", "colspan": "2", "children": [{"tagname": "button", "id": "sendBtn", "textContent": "\ud83d\ude80 Send Request", "style": "margin:5px;"}, {"tagname": "button", "id": "clearBtn", "textContent": "\ud83d\udd04 Clear", "style": "margin:5px;"}, {"tagname": "button", "id": "loadBtn", "textContent": "\ud83d\udccb Load Example", "style": "margin:5px;"}]}]}, {"tagname": "tr", "children": [{"tagname": "td", "colspan": "2", "children": [{"tagname": "h3", "textContent": "\ud83d\udcca Server Response"}]}]}, {"tagname": "tr", "children": [{"tagname": "td", "colspan": "2", "children": [{"tagname": "pre", "id": "responseContent", "textContent": "[READY] Console initialized. Send a request to begin...", "style": "background:#222;color:#0f0;padding:10px;min-height:200px;"}]}]}, {"tagname": "tr", "children": [{"tagname": "td", "colspan": "2", "children": [{"tagname": "script", "textContent": "function sendRequest(){console.log('sendRequest called');const ep=document.getElementById('endpoint');const m=document.getElementById('method');const rd=document.getElementById('requestData');const rc=document.getElementById('responseContent');if(!ep||!m||!rd||!rc){console.error('Missing elements');return}rc.textContent='[SENDING] '+m.value+' '+ep.value+'...';let opts={method:m.value,headers:{'Content-Type':'application/json'}};if(m.value==='POST'&&rd.value.trim()){opts.body=rd.value}console.log('Fetching:',ep.value,opts);fetch(ep.value,opts).then(r=>r.text()).then(text=>{console.log('Response:',text);try{const data=JSON.parse(text);rc.textContent='[SUCCESS]\\n'+JSON.stringify(data,null,2)}catch(e){rc.textContent='[RESPONSE]\\n'+text}}).catch(e=>{console.error('Fetch error:',e);rc.textContent='[ERROR] '+e.message})}function clearAll(){console.log('clearAll called');const rd=document.getElementById('requestData');const rc=document.getElementById('responseContent');if(rd)rd.value='';if(rc)rc.textContent='[CLEARED] Ready'}function loadExample(){console.log('loadExample called');const ep=document.getElementById('endpoint');const rd=document.getElementById('requestData');if(!ep||!rd)return;const examples={'http://chat.chessers.club/api/message.php':JSON.stringify({message:'Hello at '+new Date().toLocaleTimeString(),sender:'dotFly_user'},null,2)};rd.value=examples[ep.value]||JSON.stringify({message:'Test',sender:'guest'},null,2)}document.addEventListener('click',function(e){console.log('Click:',e.target.id);if(e.target.id==='sendBtn'){e.preventDefault();sendRequest()}else if(e.target.id==='clearBtn'){e.preventDefault();clearAll()}else if(e.target.id==='loadBtn'){e.preventDefault();loadExample()}});"}]}]}]};
if (document.readyState === 'loading') {
    document.addEventListener('DOMContentLoaded', function() {
        modala(pageData, document.body);
    });
} else {
    modala(pageData, document.body);
}
</script>
</body>
</html>