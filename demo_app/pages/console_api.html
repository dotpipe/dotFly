<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Server Console</title>
    <link rel="stylesheet" href="/demo_app/assets/style.css">
</head>
<body>
<script src="/dotpipe.js"></script>
<script>
const pageData = {"tagname": "table", "id": "apiContent", "children": [{"tagname": "tr", "children": [{"tagname": "td", "children": [{"tagname": "h2", "textContent": "\ud83d\ude80 API Tester"}]}]}, {"tagname": "tr", "children": [{"tagname": "td", "textContent": "\ud83c\udfaf Endpoint:"}, {"tagname": "td", "children": [{"tagname": "select", "id": "endpoint", "class": "apiForm", "options": "Chat Status:http://chat.chessers.club/api/status.php;Send Message:http://chat.chessers.club/api/message.php;Get Messages:http://chat.chessers.club/api/messages.php;User Info:http://chat.chessers.club/api/user.php;Server Info:http://chat.chessers.club/api/info.php"}]}]}, {"tagname": "tr", "children": [{"tagname": "td", "textContent": "\u2699\ufe0f Method:"}, {"tagname": "td", "children": [{"tagname": "select", "id": "method", "class": "apiForm", "options": "GET:GET;POST:POST"}]}]}, {"tagname": "tr", "children": [{"tagname": "td", "textContent": "\ud83d\udcdd Request Data (JSON):"}, {"tagname": "td", "children": [{"tagname": "textarea", "id": "requestData", "class": "apiForm", "placeholder": "{\"id\": \"123\", \"title\": \"New Task\"}", "style": "width:400px;height:100px;"}]}]}, {"tagname": "tr", "children": [{"tagname": "td", "colspan": "2", "children": [{"tagname": "button", "id": "sendBtn", "textContent": "\ud83d\ude80 Send Request", "style": "margin:5px;", "form-class": "apiForm", "callback": "sendRequest"}, {"tagname": "button", "id": "clearBtn", "textContent": "\ud83d\udd04 Clear", "style": "margin:5px;", "onclick": "clearAll()"}, {"tagname": "button", "id": "loadBtn", "textContent": "\ud83d\udccb Load Example", "style": "margin:5px;", "onclick": "loadExample()"}]}]}, {"tagname": "tr", "children": [{"tagname": "td", "colspan": "2", "children": [{"tagname": "h3", "textContent": "\ud83d\udcca Server Response"}]}]}, {"tagname": "tr", "children": [{"tagname": "td", "colspan": "2", "children": [{"tagname": "pre", "id": "responseContent", "textContent": "[READY] Console initialized. Send a request to begin...", "style": "background:#222;color:#0f0;padding:10px;min-height:200px;"}]}]}, {"tagname": "tr", "children": [{"tagname": "td", "colspan": "2", "children": [{"tagname": "script", "textContent": "window.clearAll=function(){const rd=document.getElementById('requestData');const rc=document.getElementById('responseContent');if(rd)rd.value='';if(rc)rc.textContent='[CLEARED] Ready for new request...'};window.loadExample=function(){const ep=document.getElementById('endpoint');const rd=document.getElementById('requestData');if(!ep||!rd)return;const examples={'http://chat.chessers.club/api/message':{message:'Hello from API tester',user:'test_user'},'http://chat.chessers.club/api/fs':{operation:'list',path:'./'}};rd.value=JSON.stringify(examples[ep.value]||{message:'Test message'},null,2)};window.sendRequest=function(){const ep=document.getElementById('endpoint');const m=document.getElementById('method');const rd=document.getElementById('requestData');const rc=document.getElementById('responseContent');if(!ep||!m||!rd||!rc)return;console.log('Sending request to:',ep.value);rc.textContent='[SENDING] '+m.value+' to '+ep.value+'...\\n';let jsonData={};if(rd.value.trim()){try{jsonData=JSON.parse(rd.value)}catch(e){rc.textContent='[ERROR] Invalid JSON: '+e.message;console.error('JSON parse error:',e);return}}const opts={method:m.value,headers:{'Content-Type':'application/json'}};if(m.value==='POST'&&Object.keys(jsonData).length>0)opts.body=JSON.stringify(jsonData);console.log('Fetch options:',opts);fetch(ep.value,opts).then(r=>{console.log('Response status:',r.status);return r.text().then(text=>{try{return JSON.parse(text)}catch(e){console.error('Response not JSON:',text);return{error:'Invalid JSON response',response:text}}})}).then(data=>{console.log('Response data:',data);rc.textContent='[SUCCESS]\\n'+JSON.stringify(data,null,2)}).catch(e=>{console.error('Fetch error:',e);rc.textContent='[ERROR] '+e.message+'\\n\\nCheck console (F12) for details'})};document.body.addEventListener('click',function(e){if(e.target.id==='sendBtn')sendRequest();else if(e.target.id==='clearBtn')clearAll();else if(e.target.id==='loadBtn')loadExample()});"}]}]}]};
if (document.readyState === 'loading') {
    document.addEventListener('DOMContentLoaded', function() {
        modala(pageData, document.body);
    });
} else {
    modala(pageData, document.body);
}
</script>
</body>
</html>